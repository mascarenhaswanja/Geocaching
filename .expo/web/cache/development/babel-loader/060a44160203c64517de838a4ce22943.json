{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/mayankarya/Documents/Geocaching/Screens/MapGeoCachingScreen.js\";\nimport React, { useState, useEffect } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport * as Location from \"expo-location\";\nimport MapView, { Marker, Animated } from 'react-native-maps';\nimport { db } from \"../utilities/FirebaseManager\";\n\nfunction MapGeoCachingScreen(props) {\n  var _this = this;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      locPinData = _useState2[0],\n      setLocPinData = _useState2[1];\n\n  var _useState3 = useState({\n    latitude: 43.6163539,\n    longitude: -79.3793008,\n    latitudeDelta: 0.05,\n    longitudeDelta: 0.05\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      currRegion = _useState4[0],\n      setCurrentRegion = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      selectedPin = _useState6[0],\n      setSelectedPin = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      showAddToFav = _useState8[0],\n      setShowAddToFav = _useState8[1];\n\n  var getGeoCachingLocationFromFirebase = function getGeoCachingLocationFromFirebase() {\n    var tempLocArray = [];\n    db.collection(\"cachLocations\").get().then(function (querySnapshot) {\n      querySnapshot.forEach(function (documentFromFirestore) {\n        tempLocArray.push({\n          lat: documentFromFirestore.get(\"lat\"),\n          lng: documentFromFirestore.get(\"lng\"),\n          desc: documentFromFirestore.get(\"desc\"),\n          key: documentFromFirestore.id\n        });\n        setLocPinData(tempLocArray);\n      });\n    });\n  };\n\n  useEffect(function () {\n    getGeoCachingLocationFromFirebase();\n    console.log(locPinData);\n  }, []);\n\n  var onMapMoved = function onMapMoved(data) {\n    console.log(data);\n  };\n\n  var showCurrentLocation = function showCurrentLocation() {\n    setCurrentRegion({\n      latitude: 43.6163539,\n      longitude: -79.3793008,\n      latitudeDelta: 0.05,\n      longitudeDelta: 0.05\n    });\n  };\n\n  var onMarkerSelected = function onMarkerSelected(docId) {\n    setShowAddToFav(true);\n    setSelectedPin(docId);\n  };\n\n  var AddToFavClick = function AddToFavClick() {\n    db.collection(\"favourites\").add(selectedPin).then(function (docRef) {\n      console.log(\"Document written with ID: \", docRef.id);\n      setResult(\"Successfully added to Fav List\");\n    }).catch(function (error) {\n      console.error(\"Error adding document: \", error);\n      setResult(\"Error while adding to Fav List!\");\n    });\n  };\n\n  return React.createElement(View, {\n    style: {\n      flex: 1,\n      justifyContent: 'center',\n      alignItems: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }\n  }, \"MapScreen!\"), React.createElement(MapView, {\n    style: {\n      width: Dimensions.get('window').width,\n      height: 600\n    },\n    initialRegion: currRegion,\n    onRegionChangeComplete: onMapMoved,\n    showCurrentLocation: \"true\",\n    showsCompass: true,\n    maxZoomLevel: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 11\n    }\n  }, locPinData.map(function (pin) {\n    return React.createElement(Marker, {\n      key: pin.key,\n      coordinate: {\n        latitude: pin.lat,\n        longitude: pin.lng\n      },\n      title: pin.desc,\n      onPress: function onPress() {\n        return onMarkerSelected(pin.key);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 23\n      }\n    });\n  })), showAddToFav ? React.createElement(React.Fragment, null) : React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 37\n    }\n  }, React.createElement(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 16\n    }\n  }, \"Marker details\"), React.createElement(Button, {\n    title: \"Add To Fav\",\n    onPress: AddToFavClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 16\n    }\n  })));\n}\n\nexport default MapGeoCachingScreen;","map":{"version":3,"sources":["/Users/mayankarya/Documents/Geocaching/Screens/MapGeoCachingScreen.js"],"names":["React","useState","useEffect","Location","MapView","Marker","Animated","db","MapGeoCachingScreen","props","locPinData","setLocPinData","latitude","longitude","latitudeDelta","longitudeDelta","currRegion","setCurrentRegion","selectedPin","setSelectedPin","showAddToFav","setShowAddToFav","getGeoCachingLocationFromFirebase","tempLocArray","collection","get","then","querySnapshot","forEach","documentFromFirestore","push","lat","lng","desc","key","id","console","log","onMapMoved","data","showCurrentLocation","onMarkerSelected","docId","AddToFavClick","add","docRef","setResult","catch","error","flex","justifyContent","alignItems","width","Dimensions","height","map","pin"],"mappings":"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","sourcesContent":["import React, {useState,useEffect} from \"react\"\nimport {View, Text, Dimensions, Button} from \"react-native\";\nimport * as Location from \"expo-location\";\nimport MapView, { Marker , Animated } from 'react-native-maps';\nimport { db } from \"../utilities/FirebaseManager\"\n\n\n\n//define the exponent\nfunction MapGeoCachingScreen(props) {\n    const [locPinData,setLocPinData] = useState([]);\n    const [currRegion,setCurrentRegion] = useState({\n        latitude: 43.6163539,\n        longitude:  -79.3793008,\n        latitudeDelta: 0.05,\n        longitudeDelta: 0.05,   \n      }\n     )\n\n    const [selectedPin,setSelectedPin] = useState('');\n    const [showAddToFav, setShowAddToFav] = useState(false);\n\n    const getGeoCachingLocationFromFirebase = () => {\n        const tempLocArray = [];\n        db.collection(\"cachLocations\").get().then((querySnapshot) => {\n            querySnapshot.forEach((documentFromFirestore) => {\n            // tempArray.push({title : documentFromFirestore.get(\"title\"), id : documentFromFirestore.id});\n            // setListData(tempArrray);\n            tempLocArray.push({lat : documentFromFirestore.get(\"lat\"), lng : documentFromFirestore.get(\"lng\"), desc : documentFromFirestore.get(\"desc\"), key : documentFromFirestore.id })\n\n            setLocPinData(tempLocArray);\n            });\n          });\n    }\n\n    useEffect(()=> {getGeoCachingLocationFromFirebase()\n    console.log(locPinData)},[]);\n\n    \n     const onMapMoved = (data) => {\n       console.log(data)\n     }\n\n     const showCurrentLocation = () => {\n        setCurrentRegion({\n            latitude: 43.6163539,\n            longitude:  -79.3793008,\n            latitudeDelta: 0.05,\n            longitudeDelta: 0.05, });\n     }\n\n     const onMarkerSelected = (docId) => {\n        setShowAddToFav(true);\n        setSelectedPin(docId);\n     }\n\n     const AddToFavClick = () => {\n        db.collection(\"favourites\").add(selectedPin)\n        .then((docRef) => {\n            console.log(\"Document written with ID: \", docRef.id);\n            setResult(`Successfully added to Fav List`)\n        })\n        .catch((error) => {\n            console.error(\"Error adding document: \", error);\n            setResult(\"Error while adding to Fav List!\");\n        });\n     }\n\n      return (\n        <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n          <Text>MapScreen!</Text>\n          <MapView\n           style={{width: Dimensions.get('window').width, height:600}}\n           initialRegion={currRegion}\n           onRegionChangeComplete={onMapMoved}\n           showCurrentLocation='true'\n           showsCompass={true}\n           maxZoomLevel={8}\n           \n         >\n           {/* <Marker coordinate={{latitude: 45.51, longitude: -73.5775}} title=\"Pin\" onPress={()=> {console.log(\"Marker clicked\")}}/>\n           <Marker coordinate={{latitude: 45.41, longitude: -73.5775}} title=\"New Pin\"/> */}\n    \n           {\n               locPinData.map((pin) => {\n               return <Marker key={pin.key} coordinate={{latitude: pin.lat , longitude: pin.lng}} title={pin.desc} onPress={ () => onMarkerSelected(pin.key)}/>\n               })\n           }\n           </MapView> \n           { showAddToFav ? <></> : <View>\n               <Text>Marker details</Text>\n               <Button title=\"Add To Fav\" onPress={AddToFavClick}></Button>\n            </View>  }\n              \n        </View>\n      );\n    \n}\n\n\n\n//export the component\nexport default MapGeoCachingScreen;"]},"metadata":{},"sourceType":"module"}