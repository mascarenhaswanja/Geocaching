{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/graphic/Documents/#mads4008_Advanced_Web/#project/Geocaching/Screens/FavouriteScreen.js\";\nimport React, { useState } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\n\nfunction FavouriteScreen(props) {\n  var _this = this;\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      email = _useState2[0],\n      setEmail = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      data = _useState4[0],\n      setData = _useState4[1];\n\n  var _useState5 = useState(true),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isLoading = _useState6[0],\n      setIsLoading = _useState6[1];\n\n  var _useState7 = useState(true),\n      _useState8 = _slicedToArray(_useState7, 2),\n      buttonEnabled = _useState8[0],\n      setButtonEnabled = _useState8[1];\n\n  var caches = [];\n\n  var getAllCaches = function getAllCaches() {\n    console.log(\"Fav - Get All Caches\");\n    db.collection(\"favorites\").get().then(function (querySnapshot) {\n      querySnapshot.forEach(function (documentFromFirestore) {\n        console.log(documentFromFirestore.id + \", \" + JSON.stringify(documentFromFirestore.data()));\n        var fav = {\n          id: documentFromFirestore.data().id,\n          title: documentFromFirestore.data().title\n        };\n        console.log(\"Fav Firestore \", fav);\n        caches.push(fav);\n      });\n\n      if (caches.length === 0) {\n        alert(\"No Locations found\");\n        setButtonEnabled(false);\n      }\n\n      setData(caches);\n    });\n    setIsLoading(false);\n    console.log(\"Caches \", caches);\n  };\n\n  useEffect(function () {\n    getAllCaches();\n  }, []);\n\n  var saveFavorite = function saveFavorite() {\n    getEmail();\n    var cache = {\n      id: data.id,\n      title: data.title\n    };\n    db.collection(\"favorites\").add(cache).then(function (doc) {\n      console.log(\"Document saved: \" + doc.id);\n    }).catch(function (err) {\n      console.log(\"Error saving video \" + err);\n    });\n  };\n\n  var getEmail = function getEmail() {\n    AsyncStorage.getItem(\"email\").then(function (dataFromStorage) {\n      if (dataFromStorage === null) {\n        console.log(\"Could not found\");\n      } else {\n        console.log(\"Successful get Email \" + dataFromStorage);\n        setEmail(dataFromStorage);\n      }\n    }).catch(function (error) {\n      console.log(\"Error get Primitive item \" + error);\n    });\n  };\n\n  return React.createElement(SafeAreaView, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: appstyles.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }, \"My Favorites\"), isLoading ? React.createElement(ActivityIndicator, {\n    animating: true,\n    size: \"large\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 24\n    }\n  }) : React.createElement(FlatList, {\n    data: data,\n    keyExtractor: function keyExtractor(item, index) {\n      return item.id;\n    },\n    renderItem: function renderItem(_ref) {\n      var item = _ref.item;\n      return React.createElement(TouchableOpacity, {\n        onLongPress: function onLongPress() {\n          console.log(\" Selected: \" + item.id + \" \" + item.title);\n          saveFavorite();\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }\n      }, React.createElement(View, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        style: appstyles.item_title,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }\n      }, item.title)), React.createElement(View, {\n        style: appstyles.separator,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 17\n        }\n      }));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  }));\n}\n\nexport default FavouriteScreen;","map":{"version":3,"sources":["/Users/graphic/Documents/#mads4008_Advanced_Web/#project/Geocaching/Screens/FavouriteScreen.js"],"names":["React","useState","FavouriteScreen","props","email","setEmail","data","setData","isLoading","setIsLoading","buttonEnabled","setButtonEnabled","caches","getAllCaches","console","log","db","collection","get","then","querySnapshot","forEach","documentFromFirestore","id","JSON","stringify","fav","title","push","length","alert","useEffect","saveFavorite","getEmail","cache","add","doc","catch","err","AsyncStorage","getItem","dataFromStorage","error","appstyles","item","index","item_title","separator"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\"\nimport {View, Text} from \"react-native\";\n\n \nfunction FavouriteScreen(props) {\n    const [email, setEmail] = useState('')\n    const [data, setData] = useState([])\n    const [isLoading, setIsLoading] = useState(true)\n    const [buttonEnabled, setButtonEnabled] = useState(true)\n    let caches = []\n\n    const getAllCaches = () => {\n        console.log(\"Fav - Get All Caches\") \n        db.collection(\"favorites\").get().then((querySnapshot) => {\n          querySnapshot.forEach((documentFromFirestore) => {\n            console.log(`${documentFromFirestore.id}, ${JSON.stringify(documentFromFirestore.data())}`)\n            const fav = {\n                id:  documentFromFirestore.data().id,\n                title: documentFromFirestore.data().title\n            }\n            console.log(\"Fav Firestore \",fav)\n            caches.push(fav)\n          });\n          if (caches.length === 0) {\n              alert(\"No Locations found\")\n              setButtonEnabled(false)\n          }\n          setData(caches)\n        });\n        setIsLoading(false)\n        console.log(\"Caches \",caches)\n    }\n\n    useEffect( () => {getAllCaches()}, [])\n\n    const saveFavorite = () => {\n        getEmail()\n        const cache =  {\n            id: data.id,\n            title: data.title }\n        db.collection(\"favorites\").add(cache)\n            .then(\n                (doc)=>{\n                    console.log(`Document saved: ${doc.id}`)\n                }\n            ).catch(\n                (err)=> {\n                    console.log(`Error saving video ${err}`)\n                }\n            )\n     }\n\n     const getEmail = () => {\n        AsyncStorage.getItem(\"email\")\n          .then( \n            (dataFromStorage) => {\n              if (dataFromStorage === null) {\n                console.log(`Could not found`)\n              } else {\n                console.log(`Successful get Email ${dataFromStorage}`)\n                setEmail(dataFromStorage)\n              }\n            }\n          )\n          .catch(\n            (error) => {\n              console.log(`Error get Primitive item ${error}`)\n            }\n          )\n      }\n    return (\n        <SafeAreaView>\n        <Text style={appstyles.title}>My Favorites</Text>\n        {/* <Button title=\"FAVOURITE\" disabled={!buttonEnabled} onPress={saveFavorite}/> */}\n        { isLoading ? (<ActivityIndicator animating={true} size=\"large\"/>) : (\n            <FlatList\n            data = {data}\n            keyExtractor = { (item, index) => { return item.id }} \n            renderItem = { ( {item} ) => (\n            <TouchableOpacity  onLongPress={ () => { \n                console.log(` Selected: ${item.id} ${item.title}`)\n                saveFavorite()\n                 }}>\n                <View>\n                    <Text style={appstyles.item_title}>{item.title}</Text>\n                </View>\n                <View  style={appstyles.separator}/>\n            </TouchableOpacity>)}\n            />\n        )}\n        \n        </SafeAreaView>\n\n\n    );\n}\n\nexport default FavouriteScreen;"]},"metadata":{},"sourceType":"module"}